<div class="container mt-3">
  <h2>Classes Information</h2>

  @if (loading) {
    <p>Loading results...</p>
  } @else {
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Name of Class</th>
          <th>Hours</th>
          <th>Ects</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for(clss of classes; track clss.class) {
          <tr>
            <td>{{ clss.class }}</td>
            <td><input [disabled]="editing !== clss.class" type="text" [value]="clss.hours" #hoursRef style="border:none; background-color: transparent;"/></td>
            <td><input [disabled]="editing !== clss.class" type="text" [value]="clss.ects" #ectsRef style="border:none; background-color: transparent;"/></td>
            @if(user().username == "admin") {
              <td>
                @if(editing === clss.class) {
                  <button mat-flat-button color="primary" (click)="saveChanges(clss, hoursRef.value, ectsRef.value)">Save changes</button>
                }
                <mat-icon (click)="editClass(clss)" role="button" class="text-primary mx-2">edit</mat-icon>
                <mat-icon (click)="deleteClass(clss)" role="button" class="text-danger">delete</mat-icon>
            </td>
            } @else {
              <td><button mat-flat-button color="primary" (click)="enrollInClass(clss)">Enroll</button></td>
            }
          </tr>
        }
      </tbody>
    </table>
  }
</div>
